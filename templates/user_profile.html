{% extends "commons_base.html" %}

{% load i18n %}

{% block head_title %}{% trans "member"|capfirst %}: {{ profile_user.get_display_name }}{% endblock %}

{% block body_class %}profile{% endblock %}

{% block body %}
<article class="panel text-left marginTB30 panel-c0">

  <div class="navbar panel-heading-c0 padding10">
    {% if complete_profile %}
	  <div class="pull-left">
      {% if profile.avatar %}
        <img src="/media/{{ profile.avatar }}" class="avatar-large">
      {% else %}
        <img src="/media/images/avatars/anonymous.png" class="avatar-large">
      {% endif %}
      {% if can_edit %}<div style="margin-top:-34px"><a href="/profile/{{ profile_user.username }}/upload/" class="btn bt-default" style="background:rgba(103,174,115, 0.5); width:100%; padding:6px 4px; border-radius:0">{% trans "upload photo" %}</a></div>{% endif %}
      </div>
	{% endif %}
	<h2 class="pull-left marginTB0" style="margin-top:33px; padding-left:6px">{{  profile_user.get_display_name }} 
		{% if complete_profile and not request.user == profile_user %}
		&nbsp; <a href="/my_mail/compose/{{ profile_user.username }}/" title="{% trans "send a message to" %} {{ profile_user.get_display_name }}"><i class="fa fa-envelope" style="font-size: 0.7em; vertical-align="middle"></i></a>
	{% endif %}</h2>
    {% if can_edit and complete_profile %}
      <ul class="pull-right marginT20 marginB0 font16">
        <li><a href="/my_home/">{% trans "my home"|capfirst %}</a></li>
        <li><a href="/edit_preferences/?next={{request.path}}">{% trans "preferences"|capfirst %}</a></li>
      </ul>
    {% endif %}
  </div>
  
  <section class="padding10">
    <div class="row">
      <div class={% if likes %}"col-sm-9 col-md-9 col-lg-9"{% else %}"col-sm-12 col-md-12 col-lg-12"{% endif %}>
        <div class="panel-white">
          {% if can_edit and not complete_profile %}
            <p class="text-center font18 txt-error paddingT10">{% trans "please, complete your profile"|capfirst %}!  &nbsp; <a href="/profile/{{ profile_user.username }}/edit/" title="show edit profile"><i class="fa fa-edit"></i></a></p>
          {% endif %}
          <div class="padding10">
            {% if profile.short %}<p class="marginB10">{{ profile.short }}</p>{% endif %}
            <div class="clearfix marginB10">
              <dl class="pull-left list-inline font14 paddingR20">
                <dt>{% trans "username"|capfirst %}</dt>
                <dd>{{ profile_user.username }}</dd>
              </dl>
              <dl class="pull-left list-inline font14 paddingR20">
                <dt>{% trans "email"|capfirst %}</dt>
                <dd>{{ profile_user.email }}</dd>
              </dl>
              {% if profile.country %}
                <dl class="pull-left list-inline font14 paddingR20">
                  <dt>{% trans "country"|capfirst %}</dt>
                  <dd><form action="/people/search/" method="post">{% csrf_token %}<button type="submit" class="btn-link" name="country" value="{{ profile.country.code }}">{{ profile.country.only_name|safe }}</button></form></dd>
                </dl>
              {% endif %}
              {% if profile.city %}
                <dl class="pull-left list-inline font14 paddingR20">
                  <dt>{% trans "city"|capfirst %}</dt>
                  <dd>{{ profile.city }}</dd>
                </dl>
              {% endif %}
            </div>
            <div class="marginB10">
              <div class="clearfix">
                {% if profile.edu_level %}
                  {% include "_data.html" with data=profile.edu_level data_class=" pull-left font14 paddingR20" label_data="education" action="/people/search/" type_data="edu_level" %}
                {% endif %}
                {% if profile.pro_status %}
                  {% include "_data.html" with data=profile.pro_status data_class=" pull-left font14 paddingR20" label_data="status" action="/people/search/" type_data="pro_status" %} 
                {% endif %}
              </div>
              <div class="clearfix">
                {% if profile.edu_field %}
                  {% include "_data.html" with data=profile.edu_field data_class=" pull-left font14 paddingR20" label_data="field of study" action="/people/search/" type_data="edu_field" %}
                {% endif %}
                {% if profile.pro_field %}
                  {% include "_data.html" with data=profile.pro_field data_class=" pull-left font14 paddingR20" label_data="sector of work" action="/people/search/" type_data="pro_field" %} 
                {% endif %}
              </div>
              {% if profile.position %}
                <dl class="list-inline font14">
                  <dt>{% trans "position"|capfirst %}</dt>
                  <dd>{{ profile.position }}</dd>
                </dl>
              {% endif %}
            </div>
            {% if profile.subjects.all %}
              {% include "_data_all.html" with data=profile.subjects.all data_class=" font14 marginB10" label_data="subjects of interest" action="/people/search/" type_data="subjects" %}
            {% endif %}
            {% if profile.languages.all or profile.other_languages %}
              <div class="clearfix marginB10">
                {% if profile.languages.all %}
                  {% include "_data_languages.html" with data=profile.languages.all data_class=" pull-left font14 paddingR20" action="/people/search/" %}
                {% endif %}
                {% if profile.other_languages %}
                  <dl class="list-inline pull-left font14">
                    <dt>{% trans "other languages"|capfirst %}</dt>
                    <dd>{{ profile.other_languages }}</dd>
                  </dl>
                {% endif %}
              </div>
            {% endif %}
            {% if profile.url or profile.networks.all %}
              <div class="clearfix marginB10">
                {% if profile.url %}
                  <dl class="list-inline pull-left font14 paddingR20">
                    <dt>{% trans "web site"|capfirst %}</dt>
                    <dd><a href="{{ profile.url }}" target="_blank">{{ profile.url }}</a></dd>
                  </dl>
                {% endif %}
                {% if profile.networks.all %}
                  {% include "_data_all.html" with data=profile.networks.all data_class=" pull-left font14 marginB10" label_data="social networks" action="/people/search/" type_data="networks" %}
                {% endif %}
              </div>
            {% endif %}
            {% if profile.long %}
              <dl class="list-inline marginB10">
                <dd class="field-content width-full"><blockquote class="font14">{{ profile.long|safe }}</blockquote></dd>
              </dl>
            {% endif %}
	        {% if profile.curriculum %}
	        	CURRICULUM
            {% endif %}
            {% if profile.skype and request.user == profile_user %}
            <div class="clearfix marginB10">
              <dl class="list-inline pull-left font14 paddingR20">
                <dt>{% trans "Skype id" %}</dt>
                <dd>{{ profile.skype }}</dd>
              </dl>
            </div>
            {% endif %}
            {% if profile.mentoring %}
            <div class="clearfix marginB10">
              <dl class="list-inline pull-left font14 paddingR20">
				<dt>{% trans "mentor presentation"|capfirst %}</dt>
                <dd class="field-content width-full"><blockquote class="font14">{{ profile.mentoring|safe }}</blockquote></dd>
              </dl>
            </div>
            {% endif %}
            {% if can_edit and not profile.curriculum %}
		        <dl class="font14 marginB10">
		           <dt class="demiBold">{% trans "add curriculum"|capfirst %}</dt>
		           <dd><form enctype="multipart/form-data" method="post" id="add_curriculum" action="/profile/add_document/">{% csrf_token %}
		               <input type="hidden" id="id" name="id" value="{{ profile.user_id }}">
		               <div>{{ form.non_field_errors }}</div>
		               <div class="marginB10"><span class="red">{{ form.docfile.errors }}</span>{{ form.docfile }}</div>
		               <div class="marginB10"><button type="submit" id="add" name="add" class="btn btn-default" value='{% trans "add"|capfirst %}'>{% trans "add"|capfirst %}</button>
		                  {% if form.docfile.errors %}&nbsp; <button type="submit" name="cancel" id="cancel" value="cancel" class="btn btn-default">{% trans "cancel"|capfirst %}</button>{% endif %}
		               </div>
		               </form></dd>
		        </dl>
            {% endif %}
            {% if can_edit and complete_profile %}
	            <ul class="list-inline">
	               <li class="list-back-c0"><a href="/profile/{{ profile_user.username }}/edit/" title='{% trans "show edit profile" %}' class="btn btn-default"><i class="fa fa-edit"></i> {% trans "modify" %}</a></li>
	 			</ul>
            {% endif %}
          </div>
        </div>
		{% if com_memberships %}
          <div class="panel-white">
            <div class="panel-heading-c4 padding510 demiBold">{% trans "communities"|capfirst %}</div>
			<ul class="list-inline padding10510 list-orange">
			{% for membership in com_memberships %}
              <li><a href="/project/{{ membership.project.slug }}/" title="{% trans "view community" %}">{{ membership.project.get_name }}</a></li>
			{% endfor %}
			</ul>
		  </div>
		{% endif %}
		{% if memberships %}
          <div class="panel-white">
            <div class="panel-heading-c4 padding510 demiBold">{% trans "projects"|capfirst %}</div>
			<ul class="list-inline padding10510 list-orange">
			{% for membership in memberships %}
              <li><a href="/project/{{ membership.project.slug }}/" title="{% trans "view project" %}">{{ membership.project.get_name }}</a></li>
			{% endfor %}
			</ul>
		  </div>
		{% endif %}
      </div>
    {% if likes %}
      <div class="col-sm-3 col-md-3 col-lg-3">
        <div class="panel-white">
          <div class="panel-heading-c0 padding510 demiBold">{% trans "similar members"|capfirst %}</div>
          <div {% if likes|length > 10 %} class="box-scroll box-medium" {% endif %}>
            <ul class="list-unstyled my-list-unstyled padding510">
              {% for like in likes %}
                {% if like.0 > 0.5 or forloop.counter < 6 %}
                  <li><small class="demiBold">{{ like.0|floatformat:2 }}</small> &nbsp; <img {% if like.2 %} src="/media/{{ like.2 }}" {% else %} src="/media/images/avatars/anonymous.png" {% endif %} class="avatar-small"> <small><a href="/profile/{{like.1.username }}/" title="{% trans "view user profile" %}">{{ like.1.get_display_name }}</a></small></li>
                {% endif %}
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    {% endif %}
    </div>
  </section>
</article>







{% comment %} VISTA PRECEDENTE
<div class="row">
  <div class="col-sm-3" style="margin-top: 3.0em;">
		{% if user == profile_user %}
   			<h4>{% trans "tools"|capfirst %}</h4>
           	<ul class="list-unstyled">
            	<li><a href="/my_preferences/">{% trans "preferences"|capfirst %}</a></li>
            	<li><a href="/my_home/">{% trans "dashboard"|capfirst %}</a></li>
			{% if user.has_xmpp_account %}
            	<li><a href="/my_chat/">{% trans "chatrooms"|capfirst %}</a></li>
			{% endif %}
            </ul>
		{% endif %}
   			<h4>{% trans "membership"|capfirst %}</h4>
            <ul class="list-unstyled">
            {% for membership in memberships %}
            	<li><small><a href="/project/{{ membership.project.slug }}/">{{ membership.project.get_name }}</a></small></li>
            {% endfor %}
            {% for application in applications %}
            	<li><small><a href="/project/{{ application.project.slug }}/">{{ application.project.get_name }}</a> &nbsp;<i>{% trans "application pending" %}</small></i>
            	</li>
            {% endfor %}
            </ul>
  </div>
  <div class="col-sm-6">
    <section>
			{% if user == profile_user and not profile.get_completeness %}
				<div style="margin-top: 20px; color: red;">{% trans "please, complete your profile"|capfirst %}!</div>
			{% endif %}
            <h2 class="text-center">{% trans "member"|capfirst %}:
			{% if profile %}
				{% if profile.avatar %}
				    <img src="/media/{{ profile.avatar }}"/>
				{% else %}
				    <img src="/media/images/avatars/anonymous.png" />
				{% endif %}
			{% endif %}
			{{ profile_user.get_display_name }}
			{% if can_edit %}&nbsp;<a href="/profile/{{ profile_user.username }}/edit/" title="show edit profile"><i class="fa fa-edit" style="font-size: 0.8em;"></i></a>{% endif %}
			</h2>
			{% if profile %}
				{% if profile.short %}<div style="margin-bottom: 0.5em; font-style: italic;">{{ profile.short }}</div>{% endif %}
			{% endif %}
{% if request.path = '/my_profile/' %}
			<div><strong>{% trans "username"|capfirst %}</strong>: {{ profile_user.username }}</div>
			<div><strong>{% trans "email"|capfirst %}</strong>: {{ profile_user.email }}</div>
{% endif %}
{% if profile %}
			{% if profile.country %}<div><strong>{% trans "country"|capfirst %}</strong>:
				{
	<form class="form-inline" style="display: inline;" action="/people/search/" method="post" id="people_{{ profile.country.code }}">
	{% csrf_token %}<input type="hidden" name="country" value="{{ profile.country.code }}">
   	<input type="submit" class="btn-link" style="padding:0; margin:0;" value="{{ profile.country.option_label|safe }}">
	</form>
			</div>{% endif %}
			{% if profile.city %}<div><strong>{% trans "city"|capfirst %}</strong>: {{ profile.city }}</div>{% endif %}
			{% if profile.edu_level %}<div><strong>{% trans "education"|capfirst %}</strong>:

	<form class="form-inline" style="display: inline;" action="/people/search/" method="post" id="people_{{ profile.edu_level.id }}">
	{% csrf_token %}<input type="hidden" name="edu_level" value="{{ profile.edu_level.id }}">
   	<input type="submit" class="btn-link" style="padding:0; margin:0;" value="{{ profile.edu_level.option_label|safe }}">
	</form>
			</div>{% endif %}
			{% if profile.pro_status %}<div><strong>{% trans "status"|capfirst %}</strong>:

	<form class="form-inline" style="display: inline;" action="/people/search/" method="post" id="people_{{ profile.pro_status.id }}">
	{% csrf_token %}<input type="hidden" name="pro_status" value="{{ profile.pro_status.id }}">
   	<input type="submit" class="btn-link" style="padding:0; margin:0;" value="{{ profile.pro_status.option_label|safe }}">
	</form>
			</div>{% endif %}
			{% if profile.position %}<div><strong>{% trans "position"|capfirst %}</strong>:
				{{ profile.position }}
			</div>{% endif %}
			{% if profile.edu_field %}<div><strong>{% trans "field of study"|capfirst %}</strong>:

	<form class="form-inline" style="display: inline;" action="/people/search/" method="post" id="people_edu_field.id">
	{% csrf_token %}<input type="hidden" name="edu_field" value="{{ profile.edu_field.id }}">
   	<input type="submit" class="btn-link" style="padding:0; margin:0;" value="{{ profile.edu_field.option_label|safe }}">
	</form>
			</div>{% endif %}
			{% if profile.pro_field %}<div><strong>{% trans "sector of work"|capfirst %}</strong>:

	<form class="form-inline" style="display: inline;" action="/people/search/" method="post" id="people_pro_field">
	{% csrf_token %}<input type="hidden" name="pro_field" value="{{ profile.pro_field.id }}">
   	<input type="submit" class="btn-link" style="padding:0; margin:0;" value="{{ profile.pro_field.option_label|safe }}">
	</form>
			</div>{% endif %}
			{% if profile.languages.all or profile.other_languages %}<div><strong>{% trans "languages"|capfirst %}</strong>:
				{% for language in profile.languages.all %}

  	<form class="form-inline" style="display: inline;" action="/people/search/" method="post" id="people_language_{{ language.code }}">
	{% csrf_token %}<input type="hidden" name="languages" value="{{ language.code }}">
    <input type="submit" class="btn-link" style="padding:0; margin:0;" value="{{ language.option_label|safe }}">{% if not forloop.last %},{% endif %}
	</form>
				{% endfor %}
				{% if profile.other_languages %},{{ profile.other_languages }}{% endif %}
			</div>{% endif %}
			{% if profile.subjects.all %}<div><strong>{% trans "subjects of interest"|capfirst %}</strong>:
				{% for subject in profile.subjects.all %}

  	<form class="form-inline" style="display: inline;" action="/people/search/" method="post" id="people_subject_{{ subject.id }}">
	{% csrf_token %}<input type="hidden" name="subjects" value="{{ subject.id }}">
    <input type="submit" class="btn-link" style="padding:0; margin:0;" value="{{ subject.option_label|safe }}">{% if not forloop.last %},{% endif %}
	</form>
				{% endfor %}
			</div>{% endif %}
			{% if profile.url %}<div><strong>{% trans "web site"|capfirst %}</strong>: <a href="{{ profile.url }}" target="_blank">{{ profile.url }}</a></div>{% endif %}
			{% if profile.networks.all %}<div><strong>{% trans "social networks"|capfirst %}</strong>:
				{% for network in profile.networks.all %}

  	<form class="form-inline" style="display: inline;" action="/people/search/" method="post" id="people_network_{{ network.id }}">
	{% csrf_token %}<input type="hidden" name="networks" value="{{ network.id }}">
    <input type="submit" class="btn-link" style="padding:0; margin:0;" value="{{ network.option_label|safe }}">{% if not forloop.last %},{% endif %}
	</form>
				{% endfor %}
			</div>{% endif %}
			{% if profile.long %}<div style="margin-top: 1em">{{ profile.long|safe }}</div>{% endif %}
{% endif %}
    </section>
  </div>
  <div class="col-sm-3" style="margin-top: 3.0em;">
		{% if likes %}
   			<h4>{% trans "similar members"|capfirst %}</h4>
           	<ul class="list-unstyled">
			{% for like in likes %}
				{% if like.0 > 0.5 or forloop.counter < 6 %}
           		<li><small>{{ like.0|floatformat:2 }} <a href="/profile/{{like.1.username }}/" title="{% trans "view user profile" %}">{{ like.1.get_display_name }}</a></small></li>
				{% endif %}
			{% endfor %}
           	</ul>
		{% endif %}
   			<h4>{% trans "suggested mentors"|capfirst %}</h4>
			{% if best_mentors %}
           	<ul class="list-unstyled">
			{% for mentor in best_mentors %}
				{% if like.0 > 0.5 or forloop.counter < 6 %}
           		<li><small>{{ mentor.0|floatformat:2 }} <a href="/profile/{{mentor.1.username }}/" title="{% trans "view user profile" %}">{{ mentor.1.get_display_name }}</a></small></li>
				{% endif %}
			{% endfor %}
           	</ul>
			{% else %}
            <div><small><i>{% trans "no fit mentors were found in the communities of which you are member"|capfirst %}</i></small></div>
			{% endif %}
  </div>
</div>
{% endcomment %}
{% endblock %}
