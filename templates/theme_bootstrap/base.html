{% load staticfiles %}
{% load i18n %}
{% load url from future %}
{% load menu %}
{% generate_menu %}

<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
    <head>
        <meta charset="utf-8" />
        <title>{% block head_title_base %}{% block head_title %}{% endblock %}{% endblock %}{% if site_name  %} | {{ site_name }}{% endif %}</title>

        {% block viewport %}
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
        {% endblock %}
        
        <link rel="shortcut icon" href="{% static "commons/img/commons.ico" %}" type="image/x-icon">
        <link rel="apple-touch-icon" href="{% static "commons/img/commons_icon.png" %}">

        {% block style_base %}
            {% comment %}<link href="{% static "pinax/css/theme.css" %}" rel="stylesheet">{% endcomment %}
            <link href="{% static "bootstrap/css/bootstrap.css" %}" rel="stylesheet">
            <link href="{% static "font-awesome/css/font-awesome.css" %}" rel="stylesheet">
{% comment %}
            <!--link href="{% static "commons/css/select2.css" %}" rel="stylesheet">
            <link href="{% static "autocomplete_light/select2.css" %}" rel="stylesheet"-->
{% endcomment %}
            {% block plus_style %}{% endblock %}
            {% block extra_style %}{% endblock %}
        {% endblock %}

        {% block html5shim %}
            <!-- HTML5 shim, for IE6-8 support of HTML elements -->
            <!--[if lt IE 9]>
                <script src="{% static "pinax/js/html5shiv.js" %}"></script>
            <![endif]-->
        {% endblock %}
        <script src="{% static "jquery/js/jquery-2.1.4.min.js" %}"></script>
{% comment %}
        <script type="text/javascript" src="{% static 'autocomplete_light/autocomplete.js' %}"></script>
        <!--script type="text/javascript" src="{% static 'autocomplete_light/jquery.init.js' %}"></script-->
        <!--script type="text/javascript" src="{% static 'autocomplete_light/autocomplete.init.js' %}"></script>
        <script type="text/javascript" src="{% static 'commons/js/select2.js' %}"></script>
        <script type="text/javascript" src="{% static 'autocomplete_light/select2.js' %}"></script-->
{% endcomment %}
        {% block extra_head_base %}
            {% block extra_head %}{% endblock %}
        {% endblock %}
    </head>
    
    <body class="bc-demigray {% block body_class %}{% endblock %}" id="{% block body_id %}{% endblock %}">
        <div class="{% block wrapper_class %}wrapper{% endblock %}">

            {% block topbar_base %}
                <header>
                    <div class="navbar-fixed-top">
                        {% block user %} {% include "_access_bar.html" %} {% endblock user %}
                        <div class="navbar navbar-default" >
                            <div class="container">
                            {% block topbar %}
                                <div class="navbar-header">
                                    <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                        <span class="fa fa-bars"></span>
                                    </button>
                                    {% comment %}
                                       {% block site_brand %}<a class="navbar-brand" href="{% url "home" %}">{{ SITE_NAME }}</a>{% endblock %}
                                    {% endcomment %}
                                </div>
                                <div class="collapse navbar-collapse navbar-responsive-collapse">
                                {% block nav %}
                                    {% comment %}
                                        <ul class="nav navbar-nav">
                                            <li><a href="#tab_one">One</a></li>
                                            <li><a href="#tab_two">Two</a></li>
                                        </ul>
                                    {% endcomment %}
                                {% endblock nav %}
                                {% comment %}
                                    {% block account_bar %}{% include "_account_bar.html" %}{% endblock %}
                                {% endcomment %}
                                </div>
                            {% endblock topbar %}
                            </div>
                        </div>
                    </div>
                </header>
                {% block login_model %}{% include "_login_model.html" %}{% endblock %}
            {% endblock topbar_base %}

            {% block body_base %}
                <section id="content_body">
                    <div class="container">
                    	
                        {% comment %}{% include "_messages.html" %}{% endcomment %}
                        {% block body %}
                        {% endblock %}
                    </div>
                </section>
            {% endblock %}
        </div>

            {% block footer_base %}
               <footer class="footer-fixed">
                  <div class="container">
                      {% block footer %}{% endblock %}
                  </div>
               </footer>
            {% endblock %}

        {% block script_base %}
            <script src="{% static "js/bootstrap.min.js" %}"></script>
            <script src="{% static "pinax/js/theme.js" %}"></script>
            <script type="text/javascript" src="{% static 'autocomplete_light/autocomplete.js' %}"></script>
            <script type="text/javascript">
              $(document).ready(function() {
               	if ($('#navigation_autocomplete').length > 0) {
                  $('#navigation_autocomplete').yourlabsAutocomplete({
                    url: '{% url 'navigation_autocomplete' %}',
                    choiceSelector: 'a',
                    minimumCharacters: 3,
                    placeholder: '{% trans "Search ... (enter at least 3 characters)" %}',
                  }).input.bind('selectChoice', function(e, choice, autocomplete) {
                    document.location.href = choice.attr('href');
                  });
                }
              });
            </script>
            {% block extra_script %}{% endblock %}
        {% endblock %}

        {% block extra_body_base %}
            {% block extra_body %}{% endblock %}
        {% endblock %}
    </body>
</html>
