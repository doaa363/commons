{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Text Analysis Dashoard</title>
    <link rel="shortcut icon" href="{% static "commons/img/commons.ico" %}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{% static "commons/img/commons_icon.png" %}" type="image/png">
    <link rel="stylesheet" href="{% static "nlp/css/style.css" %}">
    <link rel="stylesheet" href="{% static "nlp/css/animate.css" %}">
    <link rel="stylesheethref=" {% static "bootstrap/css/bootstrap.css" %} "">
    <link rel="stylesheet" href="{% static "vue_apps/src/assets/index.css" %}">
    <script src="{% static "nlp/js/wow.min.js" %}"></script>
    <script>
      new WOW().init();
    </script>
    <script src="{% static "nlp/js/displacy.js" %}"></script>
    <script src="{% static "nlp/js/jquery.min.js" %}"></script>
    <script src="{% static "nlp/js/scripts.js" %}"></script>
  </head>
  <style>
    body {
      margin: 0;
    }
  </style>
  <body>
    <script src='https://unpkg.com/vue@2.2.6'></script>
    <!-- <script src="../dist/vue-split-pane.min.js"></script> -->
    <script src="{% static "vue_apps/src/assets/vue-split-pane.min.js" %}"></script>
    <div id="app" class='components-container'>
      <template>
        {% verbatim %}
          <split-pane v-on:resize="resize" split="horizontal" :default-percent='9'>
            <template slot="paneL">
              <div style="padding: 5px;">
                <label>{{ obj_type }}</label>:
                {{ obj_id }},
                <label>Language</label>:
                {{ language }},
                {{ n_tokens }}
                <label>tokens</label>,
                {{ n_unique }}
                <label>unique word forms</label>,
                <label>Word-forms/tokens ratio:</label>
                {{ voc_density }},
                {{ n_sentences }}
                <label>sentences</label>,
                <label>Mean / Max. tokens per sentence:</label>
                {{ mean_sentence_length }} / {{ max_sentence_length }},
                <label>Mean / Max. largest dependency distance:</label>
                {{ mean_dependency_distance }} / {{ max_dependency_distance }},
                <label>Mean / Max. largest weighted dependency distance:</label>
                {{ mean_weighted_distance }} / {{ max_weighted_distance }},
                <label>Mean / Max. largest dependency depth:</label>
                {{ mean_dependency_depth }} / {{ max_dependency_depth }}<br/>
                <label>Title:</label>
                {{ title }},
                <label>Most frequent words:</label>
                <span v-for="(item, index) in kw_frequencies">
                  <span v-if="index !== 0">,
                  </span>
                  {{ item.key }}
                  ({{ item.freq }})</span>
              </div>
            </template>
            <template slot="paneR">
              <split-pane v-on:resize="resize" :min-percent='20' :max-percent='100' split="vertical">
                <template slot="paneL">
                  <split-pane v-on:resize="resize" split="horizontal" :default-percent='40'>
                    <template slot="paneL">
                      <h4 style="text-align: center;">POS-TAGGED TEXT</h4>
                      <div class="rb-content" v-html="analyzed_text" style="margin: 5px;"></div>
                    </template>
                    <template slot="paneR">
                      <split-pane v-on:resize="resize" split="horizontal" :default-percent='60'>
                        <template slot="paneL">
                          <h4 style="text-align: center;">ANALYZED SENTENCES</h4>
                          <div v-for="sentence in sentences">
                            <div v-text="sentence" style="margin-left: 5px; margin-right: 5px;"></div>
                          </div>
                        </template>
                        <template slot="paneR">
                          <h4 style="text-align: center;">NOUN CHUNKS</h4>
                          <div style="margin-left: 5px; margin-right: 5px;">
                            <span v-for="(nc, index) in noun_chunks">
                              <span v-if="index !== 0">,
                              </span>
                              {{ nc }}</span>
                          </div>
                        </template>
                      </split-pane>
                    </template>
                  </split-pane>
                </template>
                <template slot="paneR">
                  <split-pane split="horizontal" :default-percent='35'>
                    <template slot="paneL">
                      <h4 style="text-align: center;">TEXT SUMMARY</h4>
                      <div v-text="summary" style="margin: 5px;"></div>
                    </template>
                    <template slot="paneR">
                      <split-pane v-on:resize="resize" split="horizontal" :default-percent='45'>
                        <template slot="paneL">
                          <h4 style="text-align: center;">NAMED ENTITIES</h4>
                          <div v-for="entity_dict in entity_lists">
                            <div style="margin-left: 5px; margin-right: 5px;">
                              <label>{{ entity_dict.key }}</label>:
                              <span v-for="(entity, index) in entity_dict.entities">
                                <span v-if="index !== 0">,
                                </span>
                                {{ entity }}</span>
                            </div>
                          </div>
                        </template>
                        <template slot="paneR">
                          <split-pane v-on:resize="resize" split="vertical" :default-percent='33'>
                            <template slot="paneL">
                              <h4 style="text-align: center;">VERBS</h4>
                              <div v-for="item in verb_frequencies">
                                <div style="margin-left: 5px; margin-right: 5px;">{{ item.key }}
                                  ({{ item.freq }})</div>
                              </div>
                            </template>
                            <template slot="paneR">
                              <split-pane v-on:resize="resize" split="vertical" :default-percent='50'>
                                <template slot="paneL">
                                  <h4 style="text-align: center;">NOUNS</h4>
                                  <div v-for="item in noun_frequencies">
                                    <div style="margin-left: 5px; margin-right: 5px;">{{ item.key }}
                                      ({{ item.freq }})</div>
                                  </div>
                                </template>
                                <template slot="paneR">
                                  <h4 style="text-align: center;">ADJECTIVES</h4>
                                  <div v-for="item in adjective_frequencies">
                                    <div style="margin-left: 5px; margin-right: 5px;">{{ item.key }}
                                      ({{ item.freq }})</div>
                                  </div>
                                </template>
                              </split-pane>
                            </template>
                          </template>
                        </split-pane>
                      </template>
                    </split-pane>
                  </split-pane>
                </template>
              </split-pane>
            </template>
          </split-pane>
        {% endverbatim %}
      </template>
    </div>
    <script>
      // var Main =
      var app = new Vue({
        name: 'test',
        data: {
          obj_type: '{{ obj_type|capfirst }}',
          obj_id: {{ obj_id }},
          language: '{{ language }}',
          title: '{{ title }}',
          n_tokens: {{ n_tokens }},
          n_unique: {{ n_unique }},
          voc_density: ({{ voc_density }}).toFixed(3),
          n_sentences: {{ n_sentences }},
          mean_sentence_length: ({{ mean_sentence_length }}).toFixed(3),
          max_sentence_length: {{ max_sentence_length }},
          mean_dependency_depth: ({{ mean_dependency_depth }}).toFixed(3),
          max_dependency_depth: {{ max_dependency_depth }},
          mean_dependency_distance: ({{ mean_dependency_distance }}).toFixed(3),
          max_dependency_distance: {{ max_dependency_distance }},
          mean_weighted_distance: ({{ mean_weighted_distance }}).toFixed(3),
          max_weighted_distance: ({{ max_weighted_distance }}).toFixed(3),
          summary: `{{ summary|safe }}`,
          sentences: {{ sentences|safe }},
          kw_frequencies: {{ kw_frequencies|safe }},
          verb_frequencies: {{ verb_frequencies|safe }},
          noun_frequencies: {{ noun_frequencies|safe }},
          adjective_frequencies: {{ adjective_frequencies|safe }},
          entity_lists: {{ entity_lists|safe }},
          analyzed_text: `{{ analyzed_text|safe }}`,
          noun_chunks: {{ noun_chunks|safe }}
        },
        el: '#app',
        methods: {
          resize() {
            console.log('resize')
          }
        },
        mounted: function () {
          console.log('vue mounted');
          this.$nextTick(initTooltips(document.querySelectorAll('.tooltip')));
        }
      });
    </script>
  </body>
</html>