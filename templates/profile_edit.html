{% extends "commons_base.html" %}

{% load staticfiles%}
{% load i18n %}
{# load tinymce_tags #}

{% block head_title %}{% trans "edit the profile of"|capfirst %}: &nbsp;
	{% if user.first_name %}{{ user.first_name }} {{ user.last_name }}
	{% else %}{{ user.username }}
	{% endif %}{% endblock %}
	
{% block extra_head %}
	{{ form.media }}

{% endblock %}

{% block body_class %}edit_profile{% endblock %}


{% block body %}
  <div class="panel panel-c0 text-left marginTB30">
    <div class="panel-heading-c0 padding1020">
      <h2 class="marginTB5">
        <small class="c-white">{% trans "edit the profile of"|capfirst %}:</small> {% if user.first_name %} {{ user.first_name }} {{ user.last_name }} {% else %} {{ user.username }}{% endif %}
      </h2>
    </div>
    <form method="post" id="edit_form">{% csrf_token %}
      {% for field in form.hidden_fields %}{{ field }}{% endfor %}
      {% for field in form.visible_fields %}
        {% if field.name in 'first_name,skype' %}
        <fieldset class="padding1020 marginT20"><legend class="marginB10 paddingN3 font18 c-fern borderColor-c0 demiBold">{% if field.name == 'first_name' %}{% trans "general information"|capfirst %}{% else %}{% trans "communication preferences"|capfirst %}{% endif %}</legend>{% endif %}
          <div class="form-group">
            <label for="{{ field.name }}" {% if field.field.required %}class="required"{% endif %}>{{ field.label|capfirst}}</label>
            <span class="txt-error">{{ field.errors }}</span>{{ field }}
            {% if field.help_text %}<small id="{{ field.name }}helpBlock" class="help-block">{{ field.help_text }}</small>{% endif %}
          </div>
        {% if field.name in 'networks,p2p_communication' %}</fieldset>{% endif %}
      {% endfor %}
      <fieldset class="padding1020">
      	<div class="form-group bc-white padding510">{{ info|safe }}</div>
      </fieldset>
      <div class="panel-footer-c0 padding1020">
        <button type="submit" name="save" id="save" value="save" class="btn btn-default">{% trans "save"|capfirst %} {% trans "changes" %}</button>&nbsp;
        <button type="submit" name="continue" id="continue" value="continue" class="btn btn-default">{% trans "save and continue"|capfirst %}</button>&nbsp;
        <button type="submit" name="cancel" id="cancel" value="cancel" class="btn btn-default">{% trans "cancel"|capfirst %} ({% trans "user view" %})</button>
      </div>
    </form>
  </div>
{% endblock %}

{% block extra_script %}
	<script src="{% static "js/bootstrap-datetimepicker.js" %}"></script>
    {% include "_tinymce_init.html" %}
{% endblock %}

