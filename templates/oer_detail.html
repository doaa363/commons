{% extends "commons_base.html" %}

{% load i18n %}

{% block head_title %}OER: {{ oer.title }}{% endblock %}

{% block body_class %}home{% endblock %}

{% block body %}
    <section>
        <div class="container">
            <h2 class="text-center">OER: &nbsp; {{ oer.title }}
                {% if can_edit %}&nbsp; <a href="/oer/{{ oer.slug }}/edit/" title="show edit view"><i class="fa fa-edit" style="font-size: 0.7em;""></i></a>{% endif %}
            </h2>
            <p class="lead">
            <div><strong>{% trans "title"|capfirst %}</strong>: {{ oer.title }}</div>
            {% if oer.description %}<div><strong>{% trans "description"|capfirst %}</strong>: {{ oer.description }}</div>{% endif %}
            {% if oer.material %}<div><strong>{% trans "type of material"|capfirst %}</strong>: {{ oer.material.name }}</div>{% endif %}
            {% if oer.source %}<div><strong>{% trans "source repository"|capfirst %}:</strong>: <a href="/repo/{{ oer.source.slug }}/" title="Source repository">{{ oer.source.name }}</a></div>{% endif %}
            {% if oer.url %}<div><strong>URL</strong>: <a href="{{ oer.url }}" target="_blank">{{ oer.url }}</a></div>{% endif %}
            {% if oer.license %}<div><strong>{% trans "terms of use"|capfirst %}</strong>: {{ oer.license.name }}</div>{% endif %}
    		{% if oer.levels.all %}
    		<div><strong>{% trans "levels"|capfirst %}</strong>:
			<ul class="root">
		        {% for level in oer.levels.all %}
		        <li>{{ level.option_label|safe }}</li>
		        {% endfor %}
			</ul>
			</div>
		    {% endif %}
    		{% if oer.tags.all %}
    		<div><strong>{% trans "tags"|capfirst %}</strong>:
			<div style="margin-left: 2.0em;">
		        {% for tag in oer.tags.all %}
		        <a href="/oers/with-tag/{{ tag.slug }}/">{{ tag.name }}</a>{% if not forloop.last %},{% endif %}
		        {% endfor %}
			</div>
			</div>
		    {% endif %}
    		{% if oer.subjects.all %}
    		<div><strong>{% trans "subject areas"|capfirst %}</strong>:
			<ul class="root">
		        {% for subject in oer.subjects.all %}
		        <li>{{ subject.option_label|safe }}</li>
		        {% endfor %}
			</ul>
			</div>
		    {% endif %}
    		{% if oer.languages.all %}
    		<div><strong>{% trans "OER languages"|capfirst %}</strong>:
			<ul class="root">
		        {% for language in oer.languages.all %}
		        <li>{{ language.code }} - {{ language.name }}</li>
		        {% endfor %}
			</ul>
			</div>
		    {% endif %}
    		{% if oer.media.all %}
    		<div><strong>{% trans "media formats"|capfirst %}</strong>:
			<ul class="root">
		        {% for medium in oer.media.all %}
		        <li>{{ medium.option_label|safe }}</li>
		        {% endfor %}
			</ul>
			</div>
		    {% endif %}
    		{% if oer.accessibility.all %}
    		<div><strong>{% trans "accessibility features"|capfirst %}</strong>:
			<ul class="root">
		        {% for feature in oer.accessibility.all %}
		        <li>{{ feature.option_label|safe }}</li>
		        {% endfor %}
			</ul>
			</div>
		    {% endif %}
    		{% if oer.get_more_metadata %}
    		<div><strong>{% trans "other metadata"|capfirst %}</strong>:
			<ul class="root">
		        {% for metadatum in oer.get_more_metadata %}
		        <li><i>{{ metadatum.metadata_type.name }}</i>: {{ metadatum.value }}</li>
		        {% endfor %}
			</ul>
			</div>
		    {% endif %}
            <div><strong>{% trans "submitted by"|capfirst %}</strong> &nbsp;<a href="/profile/{{ oer.creator.username }}">{{ oer.creator.get_full_name }}</a>&nbsp; <strong>{% trans "in project" %}</strong>&nbsp;<a href="/project/{{ oer.project.slug }}/">{{ oer.project }}</a></div>
    		{% if oer.documents.all or oer.oer_type == 3 and can_edit %}
    		<div><strong>{% trans "attached documents"|capfirst %}</strong></div>
			<ul class="root">
		    {% for document in oer.get_sorted_documents %}
		        <li>{{ document.label }}</li>
		    {% endfor %}
			</ul>
    		{% if oer.oer_type == 3 and can_edit %}
    		<div><i>{% trans "add document"|capfirst %}</i></div>
    		<form enctype="multipart/form-data" method="POST" id="add_document" action="/oer/add_document/">
				{% csrf_token %}
				<input type="hidden" id="id" name="id" value="{{ oer.id }}" />
	            <div>{{ form.non_field_errors }}</div>
	            <div><span style="color: red;">{{ form.docfile.errors }}</span>{{ form.docfile }}
				<button type="submit" id="add" name="add" class="btn btn-default" value='{% trans "add"|capfirst %}' style="margin-left: 1.0em; padding: 0 1.5em;">{% trans "add"|capfirst %}</button>
				{% if form.docfile.errors %}&nbsp; <button type="submit" name="cancel" id="cancel" value="cancel" class="btn btn-default" style="padding: 0 1.5em;">Cancel</button>{% endif %}
				</div>
    		</form>
		    {% endif %}
		    {% endif %}
            </p>
        </div>
    </section>
{% endblock %}
