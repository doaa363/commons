{% extends "base.html" %}
{% load staticfiles %}
{% load i18n %}
{% load commons_tags %}

{% block head_title %}{% trans "Text Analysis" %} - {% trans "Text cohesion" %}{% endblock %}

{% block extra_style %}
<link rel="shortcut icon" href="{% static "commons/img/ta_dashboard.ico" %}" type="image/x-icon">
<link rel="apple-touch-icon" href="{% static "commons/img/ta_dashboard_icon.png" %}" type="image/png">
<link rel="stylesheet" href="{% static "vue_apps/src/assets/index.css" %}">
<link rel="stylesheet" href="{% static "commons/css/commons_vue.css" %}">
{% endblock extra_style %}

{% block extra_head %}
    <script src="{% static "nlp/js/jquery.min.js" %}"></script>
    <script src="{% static "nlp/js/scripts.js" %}"></script>
    <script src='https://unpkg.com/vue@2.2.6'></script>
{% endblock extra_head %}

{% block user %}{% endblock user %}

{% block nav_vue %}
  {% include "_header_bar.html" %}
  <div class="navbar">
    <h3 class="text-center">{% trans "Text Analysis" %} - {% trans "Text cohesion" %}</h3>
  </div>
{% endblock nav_vue %}

{% block body_class %}nlp-vue-body{% endblock %}

{% block body_base %}
<div class="panel panel-c4 text-left marginTB30">
  <div  class="padding1020">
    <div class="marginB10">
      {% if obj_type_label %}<b>{{ obj_type_label|capfirst }}</b>{% endif %}
      {% if title %}: <i>{{ title }}</i></span>{% endif %}
      {% if obj_id %}(id = {{ obj_id }})</span>{% endif %}
    </div>
    <div><label>{% trans "language"|capfirst %}</label> {{ language }}</div>
    <div class="marginT5"><label>{% trans "text coherence by entity graph"|capfirst %}</label></div>
    <div style="margin-left: 10px;">
      {% for g in cohesion_by_entity_graph %}<span>{{ g.0 }}: {{ g.1|stringformat:".2f" }}</span>{% if not forloop.last %}, {% endif %}{% endfor %}    
    </div>
    <div class="marginT5"><label>{% trans "local text cohesion"|capfirst %}</label></div>
    <table>
      <thead>
         <th style="width:5%">#</th><th style="width:55%">{% trans "paragraph"|capfirst %}</th>
         <th style="width:20%">{% trans "text cohesion by lexicon overlap with few previous paragraphs"|capfirst %}</th>
         <th style="width:20%">{% trans "text cohesion by overall similarity with few previous paragraphs"|capfirst %}</th>
      </thead>
      <tbody>
        {% for i, p in paragraphs %}<tr>
            <td style="vertical-align:top; text-align:center;">{{ i }}</td>
            <td>{{ p }}</td>
          {% if i == 0  %}
            <td style="vertical-align:top; text-align:center;">-</td>
            <td style="vertical-align:top; text-align:center;">-</td>
          {% else  %}
            <td style="vertical-align:top; text-align:center;">{{ cohesion_by_repetitions|lookup:i|stringformat:".2f" }}</td>
            <td style="vertical-align:top; text-align:center;">{{ cohesion_by_similarity|lookup:i|stringformat:".2f" }}</td>
          {% endif %}
        </tr>{% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% block footer_base %}{% endblock footer_base %}
