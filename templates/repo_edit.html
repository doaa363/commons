{% extends "commons_base.html" %}

{% load staticfiles%}
{% load i18n %}
{% load tinymce_tags %}

{% block head_title %}{% if repo %}{% trans "edit repository"|capfirst %}: {{ repo.name }}{% else %}{% trans "add repository"|capfirst %}{% endif %}{% endblock %}


{% block extra_head %}
{% comment %}
	{% tinymce_preview "preview-content" %}
{% endcomment %}
{% endblock %}

{% block body_class %}repo_edit{% endblock %}
{% block body %}
	<h1>{% if repo %}<small>{% trans "edit repository"|capfirst %}:</small> {{ repo.name }}{% else %}<small>{% trans "add repository"|capfirst %}</small>{% endif %}</h2>
  <div class="row">
  <div class="col-xs-12 col-sm-12 col-md-9">
    <form method="post" action="/repo/save/" id="repo_edit_form" class="form-horizontal">
    {% comment %}see http://stackoverflow.com/questions/18539711/input-widths-on-bootstrap-3{% endcomment %}
    {% csrf_token %}
    {% if repo %}<input type="hidden" id="id" name="id" value="{{ repo.id }}" />{% endif %}
    {% for field in form.hidden_fields %}{{ field }}{% endfor %}
    {% for field in form.visible_fields %}{% with i=forloop.counter %}
    <div class="form-group">
      <label for="{{ field.name }}" {% if field.field.required %}class="required"{% endif %}>{{ field.label|capfirst}}</label>
      <span class="txt-error">{{ field.errors }}</span>{{ field }}
      {% if field.help_text %}<small id="{{ field.name }}helpBlock" class="help-block">{{ field.help_text }}</small>{% endif %}
    </div>
    {% endwith %}{% endfor %}
    
    <div class="form-group">
      <button type="submit" name="save" id="save" value="save" class="btn btn-default">{% trans "save"|capfirst %}{% if repo %} {% trans "changes" %}{% endif %}</button>&nbsp;
      <button type="submit" name="continue" id="continue" value="continue" class="btn btn-default">{% trans "save and continue"|capfirst %}</button>&nbsp;
      {% if repo %}<button type="submit" name="cancel" id="cancel" value="cancel" class="btn btn-default">{% trans "cancel"|capfirst %} ({% trans "user view" %})</button>
      {% else %}<button type="button" onclick="window.location.href='/repos/'" name="cancel" id="cancel" value="cancel" class="btn btn-default">{% trans "cancel"|capfirst %}</button>
      {% endif %}
    </div>
    </form>
  </div>
  </div>
{% endblock %}

{% block extra_script %}
{% include "_tinymce_init.html" %}
{% endblock %}

